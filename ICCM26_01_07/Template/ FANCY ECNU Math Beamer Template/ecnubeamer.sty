%花里胡哨的华东师大数学科学学院beamer模版
%Author: 73Dsi

\ProvidesPackage{ecnubeamer}[2025/11/07  v1.01]

%引用一些必要的包
\usetheme[progressbar=foot, numbering=fraction]{metropolis}
\usepackage{appendixnumberbeamer}

\usepackage{textpos}
\usepackage{booktabs}

\usepackage{pgfplots}
\usepgfplotslibrary{dateplot}

\usepackage{xspace}

\usepackage{xcolor-material}

\usepackage[scale=2]{ccicons}

% %中文字体配置
% \usepackage[fontset=windows]{ctex}
% \defaultfontfeatures{Mapping = fullwidth-stop}

% %字体
% \usefonttheme{professionalfonts} 
% \usepackage{fontspec}

% \setsansfont{Arial}
% \setmonofont{Courier New}


% 中文支持
\usepackage[scheme=plain]{ctex} % 中文基础方案
\usepackage{fontspec}      % 字体配置

% Unicode数学字体支持
\usepackage{unicode-math}
\setmainfont{Times New Roman}
\setmathfont{Cambria Math}
\setmathfont{STIX Two Math}[range=cal]
\setmathfont{Libertinus Math}[range=scr]


%颜色配置
\usepackage{xcolor}
\definecolor{DarkGrey}{HTML}{353535}
\definecolor{ECNURed}{RGB}{164,31,53}
\definecolor{ECNUBrown}{RGB}{134,117,77}

\setbeamercolor{normal text}{fg = DarkGrey}
\setbeamercolor{alerted text}{fg = ECNURed}
\setbeamercolor{example text}{fg = ECNUBrown}
\setbeamercolor{frametitle}{bg = ECNURed}
\setbeamercolor{progress bar}{fg = ECNURed}

\usepackage{hyperref}
\hypersetup{
colorlinks=true,
linkcolor=DarkGrey,
urlcolor=ECNUBrown,%网址链接
}

%背景
\setbeamertemplate{background} 
{
\includegraphics[width = \paperwidth,height = \paperheight]{img/bg.pdf}
}

%封面重置
\makeatletter
\setbeamertemplate{title page}{
  \begin{minipage}[b][\paperheight]{\textwidth}
    \vfill%
    \ifx\inserttitle\@empty\else\usebeamertemplate*{title}\fi
    \ifx\insertsubtitle\@empty\else\usebeamertemplate*{subtitle}\fi
    \usebeamertemplate*{title separator}
    \ifx\beamer@shortauthor\@empty\else\usebeamertemplate*{author}\fi
    \ifx\insertdate\@empty\else\usebeamertemplate*{date}\fi
    \ifx\insertinstitute\@empty\else\usebeamertemplate*{institute}\fi
    \vfill

    \vspace*{-2.5cm}
    \ifx\inserttitlegraphic\@empty\else\inserttitlegraphic\fi
    \vspace*{1cm}
  \end{minipage}
  
}
\setlength{\metropolis@titleseparator@linewidth}{0.6pt}
\setlength{\metropolis@progressonsectionpage@linewidth}{1pt}
 \setlength{\metropolis@progressinheadfoot@linewidth}{1pt}
\makeatother

\addtobeamertemplate{frametitle}{}{%
\begin{textblock*}{100mm}(.97\textwidth,-1.02cm)
\includegraphics[height=0.9cm]{img/logo-white.pdf}
\end{textblock*}}